!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){window.TagSelect=i(3)},function(t,e,i){var s;s={escape:_.escape,invert:_.invert,isEqual:_.isEqual,merge:_.merge,uniq:_.uniq},s.getCaretCharacterOffsetWithin=function(t){var e,i=0,s=t.ownerDocument||t.document,n=s.defaultView||s.parentWindow;if("undefined"!=typeof n.getSelection){if(e=n.getSelection(),e.rangeCount>0){var o=n.getSelection().getRangeAt(0),r=o.cloneRange();r.selectNodeContents(t),r.setEnd(o.endContainer,o.endOffset),i=r.toString().length}}else if((e=s.selection)&&"Control"!==e.type){var h=e.createRange(),a=s.body.createTextRange();a.moveToElementText(t),a.setEndPoint("EndToEnd",h),i=a.text.length}return i},t.exports=s},function(t,e,i){var s=i(1),n=38,o=40,r=[n,o],h=[37,39],a=function(t){var e=s.escape(t.match);return'<li class="'+t.ns+"-option"+(t.active?" active":"")+'" data-insert="'+e+'">'+e+"</li>"},c={ns:"tasg",returnKeys:[13,9],options:[],minChars:0,matchAll:!1},d=function(t,e){this.el=t,this.options=s.merge({},c,e),this.o=this.options,this.isVisible=!1,this.beginOffset=-1,this.caretOffset=-1,this.dd=document.createElement("ul"),this.dd.classList.add(this.o.ns+"-dropdown"),this.el.parentNode.insertBefore(this.dd,this.el.nextSibling),this.bindEvents()};d.prototype.match=function(t){if(!t)return[];for(var e,i=s.escapeRegExp(t),n=new RegExp("^"+i,"i"),o=new RegExp(i,"i"),r=[],h=[],a=0;a<this.o.options.length;a++)e=this.o.options[a],e!==t&&(e.match(n)?r.push(e):this.o.matchAll&&e.match(o)&&h.push(e));return r.concat(h)},d.prototype.select=function(t){if(this.isVisible){for(var e=this.caretOffset-this.beginOffset,i=t.getAttribute("data-insert"),s=0;e>s;s++)document.execCommand("delete");document.execCommand("insertText",!1,i)}},d.prototype.show=function(t){t=t.map(function(t,e){return{ns:this.o.ns,active:0===e,match:t}}.bind(this)),this.dd.innerHTML=t.map(a).join(""),this.dd.style.left=this.el.offsetWidth+1+"px",this.dd.classList.add("visible"),this.isVisible=!0},d.prototype.hide=function(){this.dd.classList.remove("visible"),this.isVisible=!1},d.prototype.setActive=function(t){var e=this.dd.querySelector(".active"),i=e[t+"ElementSibling"];i&&(e.classList.remove("active"),i.classList.add("active"))},d.prototype.setOptions=function(t){this.options=s.merge(this.options,t)},d.prototype.bindEvents=function(){this.el.addEventListener("input",this.onInput.bind(this)),this.el.addEventListener("keydown",this.onKeydown.bind(this)),this.el.addEventListener("blur",this.hide.bind(this)),this.dd.addEventListener("mousedown",function(t){t.target.classList.contains(this.o.ns+"-option")&&this.select(t.target)}.bind(this))},d.prototype.onInput=function(){this.caretOffset=s.getCaretCharacterOffsetWithin(this.el);var t=this.el.textContent;if(!(this.caretOffset<t.length&&t[this.caretOffset].match(/\w/))){this.beginOffset=0;for(var e=this.caretOffset-1;e>=0;e--)if(t[e].match(/\W/)){this.beginOffset=e+1;break}var i=t.substr(this.beginOffset,this.caretOffset-this.beginOffset),n=this.match(i);n.length?this.show(n):this.hide()}},d.prototype.onKeydown=function(t){this.isVisible&&(this.o.returnKeys.indexOf(t.which)>=0?(t.preventDefault(),t.stopImmediatePropagation(),this.select(this.dd.querySelector(".active")),this.hide()):r.indexOf(t.which)>=0?(t.preventDefault(),this.setActive(t.which===n?"previous":"next")):h.indexOf(t.which)>=0&&this.hide())},t.exports=d},function(t,e,i){function s(t,e){t=t.jquery?t[0]:t,e=e||{},this.el=t,this.autocomplete=null,this.selected=e.selected||[],this.listeners={change:[]},this.setOptions(e.options),t.classList.add("tagselect"),Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),this.render(),this.postRender()}var n=i(1),o=i(2),r={autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:!0};n.merge(s.prototype,{render:function(){this.shouldValidate=!!Object.keys(this.options).length;var t=this.selected.map(this.template.bind(this)).join("");this.el.innerHTML=this.trim(t)},template:function(t){var e=n.escape(t),i=this.options[t]||!this.shouldValidate?"":" invalid";return'<span data-fd="'+e+'" class="tagselect-fd'+i+'"> '+e+'</span><span class="tagselect-fd-separator">, </span>'},postRender:function(){this.autocomplete=new o(this.el,{options:Object.keys(this.options)}),this.el.addEventListener("blur",this.update.bind(this)),this.el.addEventListener("keydown",function(t){91===t.which||t.metaKey?t.stopPropagation():13===t.which&&(t.preventDefault(),this.blur())})},get:function(){return this.selected},set:function(t){this.selected=n.uniq(t),this.render()},setOptions:function(t){Array.isArray(t)?this.options=n.invert(t):this.options=t||{},this.autocomplete&&this.autocomplete.setOptions({options:Object.keys(this.options)})},update:function(){var t=this.el.textContent.split(/\W+/).filter(function(t){return!!t}),e=!n.isEqual(t,this.selected);this.set(t),e&&this.validate()&&this.trigger("change")},validate:function(){if(!Object.keys(this.options).length)return!0;for(var t,e=0;t=this.selected[e];e++)if(!this.options[t])return!1;return!0},trim:function(t){return t.replace(/\n\s*/gm,"")},on:function(t,e){this.listeners[t].push(e)},trigger:function(t){this.listeners[t].forEach(function(t){t()})}}),t.exports=s}]);